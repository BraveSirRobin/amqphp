<?php
 namespace amqphp; use amqphp\protocol; use amqphp\wire; class AmqpException { function __construct (wire\Method $meth, $pl) { if ($culprit = $pl('ClassFactory', 'GetMethod', array($meth->getField('class-id'), $meth->getField('method-id')))) { $culprit = $culprit->getSpecName(); } else { $culprit = '(Unknown or unspecified)'; } $errCode = $pl('ProtoConsts', 'Konstant', array($meth->getField('reply-code'))); $eb = ''; foreach ($meth->getFields() as $k => $v) { $eb .= sprintf("(%s=%s) ", $k, $v); } $em = "[channel.close] reply-code={$errCode['name']} triggered by $culprit: $eb"; } function getMessage () { } }